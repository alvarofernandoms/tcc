\chapter{Proposta de Melhorias para a Apresentação dos Resultados do Mezuro}

Este capítulo é dedicado à exposição das propostas de melhorias de apresentação
ou visualização dos repositórios analisados pelo Mezuro. Na primeira seção, são
apresentadas as telas desenhadas pelo aluno com base na experiência com outras
ferramentas de avaliação de código-fonte. E também, outras pequenas evoluções
na disposição dos itens já existentes no Mezuro. A segunda seção trata da
disposição de possíveis técnicas de VS aplicáveis ao Mezuro, bem como um pequeno
exemplo de uso, seguido da apresentação dos resultados de uma pesquisa com as
visualizações criadas neste exemplo de uso.

Inicialmente, foi considerado como uma abordagem ideal a aplicação dessas
técnicas de visualização de software, que era o objetivo do TCC 1. Isso
justifica todo o estudo e levantamento bibliográfico do Capítulo
\ref{chap:visualizacao}. Porém, após todos os desafios apresentados no Capítulo
anterior a este, uma nova aposta de evolução foi levantada e é a descrita no
restante deste capítulo, como segundo conjunto de contribuições.

% TODO: Seção 6.1 = proposta de evolução de apresentação dos dados do Mezuro
% - aplicação do design
% TODO: quais são essas evoluções

\section{Proposta de Evolução}

A seguir são dispostas os protótipos das telas idealizadas pelo aluno. São
pequenas modificações na disposições de elementos já presentes na página de
\textit{view} dos repositórios adicionados no Mezuro (vide Figura
\ref{fig:mezuro-repositorio-view-xemele}). O objetivo destas evoluções é sanar
uma hipótese levantada durante o desenvolvimento deste trabalho: se a melhoria do
\textit{design} já não é uma primeira abordagem desejável antes  de um esforço
em aplicar técnicas de VS. As evoluções são:

% TODO: prototipar e adicionar figuras

\subsection{Design Sprint}

A equipe do Mezuro, no final de 2015, realizou um método/processo chamado de
\textit{Design Sprint}. Este método, desenvolvido pela Google Ventures tem como
objetivo o pensamento voltado para a exibição e \textit{layout} de um produto,
com conceitos baseados no desenvolvimento ágil \cite{designSprintDoc}.

\begin{figure}[!htb]
	\centering
    \includegraphics[keepaspectratio=true,scale=0.5]
    {figuras/home-DS-flow-ill.eps}
  \caption{Estágios da \textit{Design Sprint}}
  \label{fig:home-DS-flow-ill}
\end{figure}

A Figura \ref{fig:home-DS-flow-ill} mostra os seis estágios da \textit{Sprint},
de um dos métodos possíveis de se construir este processo. A ideia é concentrar
a equipe toda, grande ou pequena, no desenvolvimento de novas interfaces e
experiências para o usuário do produto. A \textit{Sprint} em si não se deve
levar menos de 2 dias para isso, ou mais de 5. Porém, é recomendado que haja um
planejamento prévio (cerca de um dia) e uma avaliação após a \textit{Sprint}
(metade de um dia), ambos com todos da equipe de desenvolvimento, designers e
envolvidos presentes.

Os seis passos e os seus encadeamentos são bem claros:
\begin{enumerate}
  \item \textbf{Understand (Entender)}: Quais são as necessidades do usuário, de
	negócio e as capacidades tecnológicas?
	\item \textbf{Define (Definir)}: Qual é a estratégia chave ou o foco?
	\item \textbf{Diverge (Divergir)}: Como vamos explorar todas as ideias
	possíveis?
	\item \textbf{Decide (Decidir)}: Selecionar as melhoras ideias até o momento.
	\item \textbf{Prototype (Prototipar)}: Criar um artefato que permita o teste
	com usuários
	\item \textbf{Validate (Validar)}: Testar as ideias com usuários, envolvidos e
	pessoas do meio técnico.
\end{enumerate}

O guia completo de como executar uma \textit{Design Sprint} pode ser encontrado
online no site de desenvolvedores da Google.
\footnote{\url{https://developers.google.com/design-sprint/downloads/DesignSprintMethods.pdf}}

\subsection{Outras Propostas}

Considerando o material disponibilizado ao aluno (e disponível publicamente) da
\textit{Design Sprint} realizada pela equipe do Mezuro e a experiência obtida
da Análise Exploratória, são propostos estes outros \textit{sketches}. São telas
relacionadas com a interação do usuário e com o objetivo de tornar o Mezuro mais
atrativo a novos usuários. As propostas são:

% TODO: add figuras da barra de menu e telas de login e sign up


% Seção 6.2 - Discussão/Avaliação de técnicas de VS no Mezuro
% "existe essa proposta do experimento, mas não recomendamos no momento..."

\section{Avaliação de Técnicas de VS no Mezuro}

Nesta seção é exposto o exemplo de uso utilizando a biblioteca Javascript D3.js;
as justificativas e escolhas de projetos para este exemplo; e a exposição da
pesquisa de avaliação feita com estudantes e pessoas envolvidas com o
desenvolvimento do Mezuro.

\subsection{D3 - Data-Driven Documents}

D3.js (\textit{Data-Driven-Documents}) é uma biblioteca Javascript construída
inicialmente por \citeonline{bostock2011d3}, que tem como um dos seus objetivos
principais a produção de visualizações dinâmicas e interativas para a \textit{Web}. Ela
faz uso de várias tecnologias vastamente utilizadas: HTML (para o conteúdo das
páginas), SVG (para descrição de gráficos vetoriais) e CSS (para estética das
páginas). A Figura \ref{fig:d3_gears} é um exemplo de como esse uso (ou
interação) é feito. Esta biblioteca permite ao programador manipular o Modelo de
Objeto de Documento (do inglês, \textit{Document Object Model} - DOM), para
modificar determinada seleção de elementos na página. Essa modificação, seja
adição ou remoção de elementos, depende dos dados de entrada e é onde a
aplicação de transformações dinâmicas é feita. Os autores idealizaram a união de
três preocupações: compatibilidade, depuração e desempenho \cite{bostock2011d3}.

\begin{figure}[!htb]
	\centering
    \includegraphics[keepaspectratio=true,scale=0.5]
    {figuras/d3_gears.eps}
  \caption{Exemplificação do Uso das Tecnologias pela D3.js \cite{michaeld3}}
  \label{fig:d3_gears}
\end{figure}

A biblioteca D3.js é licenciada sob a \textit{BSD licenses}, que é compatível
com a licença do Mezuro (\textit{AGPL} - \textit{Version} 3) e possui uma vasta
galeria de exemplos que podem se adaptar ao proposto neste trabalho.

\begin{figure}[!htb]
	\centering
    \includegraphics[keepaspectratio=true,scale=0.5]
    {figuras/d3_gallery.eps}
  \caption{Galeria de Exemplos da biblioteca D3.js \cite{galleryD3}}
  \label{fig:d3_gallery}
\end{figure}

https://github.com/mbostock/d3/wiki/Gallery

\subsection{Exemplo de Uso}

Como prova de conceito, foi realizado a adaptação de três visualizações dos
exemplos disponíveis na galeria da biblioteca D3. A primeira, feita por Thomas
Preusse, tem como título \textit{Radar Chart}
\footnote{\url{http://bl.ocks.org/tpreusse/2bc99d74a461b8c0acb1}}. Nesta
primeira adaptação, os valores de três métricas são gerados aleatoriamente. As
métricas foram escolhidas apenas para fins de ilustração. São elas: número de
métodos, número de métodos públicos e total de módulos.

Para a segunda e terceira adaptações foram coletadas métricas do projeto da
\textit{engine} para jogos do professor Edson Alves da Costa Júnior, levando-se
em consideração apenas três classes (Animation, MouseButtonEvent e Level). As
métricas são da configuração inicial do Mezuro para projetos Java/C/C++. As
métricas são:

% TODO: Adicionar estas siglas no arquivo de abreviaturas

\begin{itemize}
  \item \textbf{ACC} (\textit{Afferent Connections per Class} - Conexões
	aferentes de uma classe)
  \item \textbf{ACCM} (\textit{Average Cyclomatic Complexity per Method} -
	Média da Complexidade Ciclomática por método)
  \item \textbf{AMLOC} (\textit{Average Method LOC} - Média do número de linhas
	de código por método)
  \item \textbf{ANPM} (\textit{Average Number of Parameters per Method} - Média
	do número de linhas de código por método)
  \item \textbf{DIT} (\textit{Depth of Inheritance Tree} - Profundidade da
	árvore de herança)
  \item \textbf{NOM} (\textit{Number of Methods} - Número de métodos)
  \item \textbf{NPA} (\textit{Number of Public Attributes} - Número de
	atributos públicos)
  \item \textbf{SC} (\textit{Structural Complexity} - Complexidade estrutural)
\end{itemize}

A segunda adaptação foi baseada no trabalho de Michael Bostock, \textit{Node
Link Tree, Radial Reingold – Tilford Tree}
\footnote{\url{http://bl.ocks.org/tpreusse/2bc99d74a461b8c0acb1}}. E a terceira
é adaptada de uma das visualizações criadas por Lars
Kotthoff\footnote{\url{http://bl.ocks.org/larskotthoff/7022289}}.

Para a exibição destas adaptações, foi realizado a construção de uma aplicação
Rails simplificada, apenas com o carregamento de páginas estáticas e hospedada
na plataforma Heroku. Pode ser acessada através do domínio
\href{https://visualizationtest.herokuapp.com/}{visualizationtest.herokuapp.com}.

Com o propósito de ser um teste de visualização de software, esta exibição foi
submetida à avaliação de estudantes e pessoas envolvidas com a Engenharia de
Software. Utilizou-se da ferramenta Google Forms para tal pesquisa. Foi exposto
o seguinte texto de introdução:


\begin{itemize}
  \item[] \textit{Olá!}
  \item[] \textit{Esse questionário tem o objetivo de me ajudar com o meu
	projeto de TCC.}
  \item[] \textit{A primeira considera três métricas básicas (número de
	métodos, número de métodos públicos e o número total de módulos) de um
	projeto qualquer.}
  \item[] \textit{A segunda e a terceira são métricas coletadas do projeto da
	engine para jogos do professor Edson Alves da Costa Junior(1) e considerando
	apenas três classes (Animation, MouseButtonEvent e Level). As métricas são da
	configuração geral para projetos JAVA/C/C++ do Mezuro(2).}
	\item[] \textit{Por favor, acesse https://visualizationtest.herokuapp.com/ e
	navegue pelos três links. Veja se achou intuitivo e fácil de utilizar. Após
	ter passadas pelas três visualizações, responda essas perguntas:}
	\item[] \textit{Referências}
	\item[] \textit{(1) https://github.com/fgagamedev/IJE}
	\item[] \textit{(2) http://mezuro.org/pt/kalibro\_configurations/1}
\end{itemize}

E as perguntas foram:

\begin{itemize}
  \item[] \textit{Qual das visualizações você considera melhor para a
	interpretação das métricas?}
		\begin{itemize}
			\item {Random Radar Chart by Thomas Preusse (adapted)}
			\item {Node Link Tree by Mike Bostock (adapted)}
			\item {Node Link With Interation by Lars Kotthoff (adapted)}
		\end{itemize}
  \item[] \textit{Qual delas foi mais claro identificar os
	pontos/classes/métricas críticos e que merecem atenção?}
		\begin{itemize}
			\item {Random Radar Chart by Thomas Preusse (adapted)}
			\item {Node Link Tree by Mike Bostock (adapted)}
			\item {Node Link With Interation by Lars Kotthoff (adapted)}
		\end{itemize}
  \item[] \textit{Por favor, caso tenha algum comentário, críticas e sugestões,
	utilize o campo abaixo:}
\end{itemize}

As figura \ref{fig:radar}, \ref{fig:node_link_tree} e
\ref{fig:node_link_tree_with_interaction} mostram estas adaptações disponíveis
na pequena aplicação Rails.

\begin{figure}[!htb]
	\centering
    \includegraphics[keepaspectratio=true,scale=0.5]
    {figuras/radar.eps}
  \caption{Gráfico Radar por Thomas Preusse (adaptado)}
  \label{fig:radar}
\end{figure}

\begin{figure}[!htb]
	\centering
    \includegraphics[keepaspectratio=true,scale=0.15]
    {figuras/node_link_tree.eps}
  \caption{Node Link Tree por Michael Bostock (adaptado)}
  \label{fig:node_link_tree}
\end{figure}

\begin{figure}[!htb]
	\centering
    \includegraphics[keepaspectratio=true,scale=0.35]
    {figuras/node_link_tree_with_interaction.eps}
  \caption{Collapsible Indented Tree por Lars Kotthoff (adaptado)}
  \label{fig:node_link_tree_with_interaction}
\end{figure}

\newpage

\newpage

Com um total de 18 participantes, aproximadamente 60\% escolheu a visualização
feita por Lars Kotthoff (Node Link with Interaction - Collapsible Indented
Tree) como a melhor para interpretação das métricas e também para identificar
com mais claridade os pontos críticos. Os resultados completos estão no Apêndice
\ref{chap:apendiceA}.

\subsection{Discussão Final}

A proposta inicial de aplicação de técnicas de VS foi revogado ao longo do
desenvolvimento deste trabalho. Porém, os resultados propostos neste experimento
podem ser um passo inicial nesta direção. Considerando o estado atual do Mezuro,
é recomendado, portanto, que a apresentação dos resultados das métricas com as
visualizações propostas no exemplo de uso não seja trabalhada de fato.
